---
layout: post
title: "npm v7의 새로운 기능은 무엇입니까?"
author: 'Code Tower'
thumbnail: https://blog.logrocket.com/wp-content/uploads/2020/12/npm-logo.jpg
tags: undefined
---


![image](https://i1.wp.com/blog.logrocket.com/wp-content/uploads/2020/12/npm-logo.jpg?fit=730%2C487&ssl=1)

몇 달간의 노력 끝에 공식적으로 npm@7.0.0을 발매한 npm CLI 팀에게 2020년 10월 13일은 해피 릴리즈였다.

npm은 자바스크립트용 패키지 관리자이며 크롬의 V8 자바스크립트 엔진을 기반으로 하는 비동기 이벤트 기반 자바스크립트 런타임인 Node.js의 기본 패키지 관리자이다.

이 새로운 릴리스는 npm CLI 사용자 기반에서 매우 요청된 몇 가지 기능을 도입했습니다.

이러한 기능에는 작업 공간, 피어 종속성을 자동으로 설치하는 기능 및 이 문서에서 강조 표시할 기타 몇 가지 기능이 포함됩니다.

npm v7.0.0으로 시작하려면 단말기에서 npmi-gnpm@7을 실행합니다.

npm@7.0.0은 여전히 매우 새로운 것이므로 특히 프로덕션에서 npm을 사용하는 수백만 개의 워크플로우를 깨지 않는다.

이러한 이유로 npm은 `최신`으로 표시되지 않으며, npm@7.0.0이 출시된 후 최근에 등장한 npm install-gnpm@7을 실행하거나 Node.js 15를 설치하지 않으면 기본적으로 npm v7.0.0이 표시되지 않습니다.

## 새로운 게 뭐죠?

npm 7에는 3가지 흥미진진한 대망의 그리고 요청된 특징들이 있다.

### 워크스페이스

이 기능은 오랫동안 커뮤니티에서 요청해 온 기능입니다. Workspaces는 npm CLI에서 단일 최상위 루트 패키지 내에서 여러 패키지를 관리할 수 있도록 지원하는 기능 집합입니다. 이는 항상 동일한 이름으로 유사한 기능을 구현하는 Warn과 Pnpm과 함께 존재해왔다. 그들은 관련된 더 큰 지역사회에 이익을 주기 위해 단순성을 위해 그것을 재사용하기로 선택했습니다.

중첩된 패키지를 보다 효율적으로 관리할 수 있는 기능 세트에 액세스하려면 `npm cli`에 두 가지 주요 구현 또는 변경이 필요합니다.

- npm cli 작업 공간을 인식하도록 합니다.
- npm 워크스페이스 설정에서 사용자는 모든 중첩된 패키지를 설치하고 최상위 작업 공간에서 관련 라이프사이클 스크립트를 수행할 수 있어야 합니다. 또한 서로 종속성이 있는 워크스페이스와 symlink(파일 간의 심볼 링크)를 적절히 인식해야 한다.

여기서 npm 작업 공간에 대한 자세한 내용을 볼 수 있습니다.

### 피어 종속성 자동 설치

이전 버전(`npm v6`)에서는 기본적으로 peer-dependency가 npm. 그 대신, 개별 소비자는 스스로 동료 의존성을 설치하고 관리해야 했다. 종종 문제로 잘못 해석되는 경고 메시지가 사용자에게 표시될 수 있습니다. 그런 다음 이는 패키지 유지관리자에게 보고될 수 있으며, 이에 대응하여 때때로 피어 의존성을 생략하고 대신 선택적 종속성으로 효과적으로 처리한다. 이것은 버전 범위나 유효성에 대한 어떠한 검사도 동반하지 않았다.

또한 npm 설치 관리자는 피어 종속성을 인식하지 못하므로 피어 종속성이 있을 때 문제를 일으키는 트리를 설계할 수 있습니다.

이 새로운 릴리스(npm v7.0.0)는 이제 개발자가 이러한 종속성을 수동으로 관리하고 설치하기 전에 피어 종속성을 자동으로 설치하기 쉽게 만들었다.

npm CLI 팀에 따르면, 새로운 피어 종속 알고리즘은 node_modules 트리의 피어 종속 위치 또는 피어 종속 위치 위에서 유효하게 일치하는 피어 종속성을 찾도록 보장합니다.

이 제안된 알고리듬은 이전 버전의 피어 종속성과 관련된 모든 문제를 해결하여 피어 종속성을 1등급 개념으로 만들고 패키지 트리 유효성을 위한 요구 사항을 만든다.

피어 종속성 설치에 대한 자세한 내용은 여기에서 확인할 수 있습니다.

### 패키지 잠금 v2 및 yarn.lock 지원

새로운 패키지 잠금 포맷은 결정적으로 재현 가능한 빌드를 수행할 수 있는 기능을 해제하고 npm이 패키지 트리를 완전히 구축하는 데 필요한 모든 것을 포함한다.

CLI는 이제 `yarn.lock`을 패키지 메타데이터 및 해결 지침의 소스로도 사용할 수 있습니다.

여기서 더 많이 읽을 수 있어요.

## npm 7.0.0의 변경 중단

이 3가지 주요 새로운 기능 외에도, 우리 모두는 전반적인 개발자 경험을 향상시키기 위해 일부 획기적인 변화가 필요하다는 것을 알고 있기 때문에 개발자들이 알아야 할 몇 가지 획기적인 변화가 있다.

- 피어 종속성을 자동으로 설치할 수 있는 기능에는 특정 워크플로우가 중단될 가능성이 있음
- npm은 이제 ➡.➡ 필드를 사용하여 더 이상 npm의 내부 모듈을 ➡ 수 없게 되었다.
- npx는 npm exec 명령을 사용하기 위해 완전히 다시 작성되었다.
- npm 감사 출력은 사람이 읽을 수 있는 출력 스타일과 --json 출력 스타일이 모두 바뀌었다. 더 이상 테이블을 사용하여 취약점을 표시하지 않으며 더 이상 트리의 모든 노드를 곱하지 않습니다.
- npmls는 이제 기본적으로 최상위 패키지만 표시합니다.

![image](https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2020/12/first-code.png?resize=730%2C485&ssl=1)

`npm6`와 동일한 출력을 얻으려면 이제 `all` 옵션(예: `npms -all`)을 사용할 수 있습니다.

여기서 npm 7.0.0의 중단 변경에 대해 자세히 볼 수 있습니다.

## 지금 업데이트 받기

다음을 실행하여 오늘부터 이 업데이트를 사용할 수 있습니다.

```coffeescript
npm install -g npm@7
```

평소처럼 npm-v 또는 npm --version을 사용하여 버전을 확인할 수 있습니다.

> 참고: @ 뒤에 버전 번호(예: 'npm install -gnpm@<version-number>)를 추가하여 최신 버전을 설치한 후에도 이전 버전의 npm으로 쉽게 전환할 수 있습니다.

아래는 `npm v7`이 피어 종속성을 자동으로 설치하는 방법을 보여 주는 예입니다.

대응에 대한 피어 종속성이 있는 종속성을 설치하고 설치 방법을 알아보겠습니다.

먼저 CLI에서 npmls react를 실행하여 종속성이 없음을 확인합니다.

![image](https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2020/12/MY-PC.png?resize=730%2C157&ssl=1)

그러면 이제 이 새로운 기능이 구현되는 것을 볼 수 있도록 원하는 종속성을 설치할 수 있습니다.

![image](https://i1.wp.com/blog.logrocket.com/wp-content/uploads/2020/12/npm-install.png?resize=730%2C491&ssl=1)

내가 지적하고 싶은 또 다른 예는 npx가 재건되었다는 것이다.

이전에는 npm을 설치할 때 설치했지만 npx가 자체 패키지였다. 이제 더 이상 별도 패키지가 아닙니다. npm에 내장되어 있습니다(사람들이 제대로 된 한 신경 쓰지 않지만). 설치하려고 할 때 설치를 계속할지 확인하라는 메시지가 표시됩니다.

![image](https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2020/12/package-2.png?resize=730%2C122&ssl=1)

이전에는 메시지를 표시하지 않고 작성한 명령을 설치하기만 하면 됩니다.

재미있게도, 여러분은 질문에 대답하도록 유도하는 그 모든 생각을 좋아하지 않을 수도 있습니다. 그래서 당신은 `-y` 깃발을 사용할 수 있습니다.

![image](https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2020/12/second-package.png?resize=730%2C203&ssl=1)

## 결론

npm CLI는 2020년 4월 githubback에 인수된 이후 처음 출시되는 버전이다. 그래서 공식 발표 정보가 깃허브 블로그에 있는 것이다.

이 기사에서는 npm v7의 새로운 기능과 함께 npm의 최신 버전으로 시작하는 방법에 대해 설명했습니다.

이러한 새로운 기능에 관심이 있는 모든 분들이 npm v7로 시작하시기를 권합니다.

### 유용한 자원

다음은 Ruy Anoro가 GitHub Presents 미팅에서 npm v7 하이라이트에 대한 강연을 하는 링크입니다.