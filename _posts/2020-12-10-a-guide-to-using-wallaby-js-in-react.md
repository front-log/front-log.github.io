---
layout: post
title: "반응에서 Wallaby.js를 사용하는 방법"
author: "Front Log"
thumbnail: "https://blog.logrocket.com/wp-content/uploads/2020/12/wallaby-feature-image.png"
tags: 
---


![image](https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2020/12/wallaby-feature-image.png?fit=730%2C487&ssl=1)

오랫동안 JavaScript 개발 분야에 종사해 왔다면 TDD(Test-Driven Development)에 대해 들어본 적이 있을 것입니다. 그것은 이미 여러분에게 삶의 한 방식일 수도 있고, 번거롭고 시간이 많이 걸리는 것처럼 보이기 때문에 그것에 저항하고 있을 수도 있습니다. 두 경우 모두 Wallaby.js가 제공하는 모든 기능을 체크 아웃함으로써 이득을 얻을 수 있습니다.

이 소개 가이드의 목표는 Retact에서 Wallaby.js로 작업을 시작하는 데 도움이 되는 단계별 지침을 제공하는 것뿐만 아니라 Wallaby.js의 목적과 이점을 살펴보는 것이다.

이 가이드는 완전히 초보적인 테스트인지 아니면 숙련된 TDD 전문가인지 쉽게 이해할 수 있도록 작성되었습니다. 이 점을 염두에 두고, 예시는 매우 간단하지만, 첫 번째 만남에서 기대할 수 있는 많은 것을 보여줄 것입니다.

## Wallaby.js란?

설명서에서 직접 인용하자면, Wallaby.js는 "JavaScript를 위한 통합 연속 테스트 도구"입니다. 즉, IDE 내에서 실행되어 쓰는 동안 지속적인 피드백을 제공한다는 의미입니다. 철자 검사 같은 거지만 테스트용이에요

대부분의 일반 테스트 환경에서 테스트는 수동으로 실행되거나 소스 코드가 저장될 때 기껏해야 실행됩니다. 소규모 프로젝트에는 해당되지만 확장성이 좋지 않습니다. 프로젝트가 성장함에 따라 테스트 제품군은 함께 성장하는 경향이 있으며, 테스트 주자들이 시간이 지날수록 처리하는 데 점점 더 많은 시간이 걸리는 대규모 작업 기관이 됩니다.

게다가, 많은 테스트 주자들은 이해하기에 특별히 직관적이지 않은 피드백을 제공하는데, 이것이 많은 새로운 개발자들이 처음부터 테스트를 꺼리는 이유의 일부이다.

이들은 테스트 프레임워크를 올바르게 구성하고, 테스트 작성 방법을 학습한 다음, 결과를 해석하는 방법도 파악해야 한다는 것을 깨닫는 데 시간을 할애합니다.

Wallaby.js를 입력합니다. 작업 중인 코드 바로 옆에 있는 자연 영어로 실시간 피드백을 제공하므로 키 입력과 각 새로운 테스트 또는 코드 블록의 결과 간에 지연 시간이 거의 없습니다.

또한 Wallaby.js는 코드 변경의 영향을 받는 최소 테스트 수를 계산하므로 대규모 코드베이스를 사용하더라도 단일 테스트만 실행하면 되는 경우가 있습니다.

이러한 이점만으로도 Wallby.js를 조사할 가치가 충분히 있지만, 더 많은 작업을 수행할 수 있으므로 전체 기능 검토는 자체 주제가 되어야 합니다. 일단은 어떻게 시작해야 하는지 알아보도록 하겠습니다.

## React에서 Wallaby.js 시작

React를 사용하여 Wallaby.js를 시작하는 것은 create-react-app 패키지가 이미 호환 가능한 테스트 프레임워크인 Jest를 포함하고 있기 때문에 쉽다. 원하신다면 모카나 자스민 같은 다른 도구도 사용하실 수 있지만, 단순성을 위해 제스트와 함께 하겠습니다.

VSCode는 제가 선택한 에디터이기 때문에 사용하겠습니다. 하지만 아톰과 서브라임 텍스트와 같은 호환 가능한 다른 에디터도 자유롭게 사용할 수 있습니다. 호환되는 편집기의 전체 목록을 보려면 Wallaby.js 설명서의 튜토리얼 섹션으로 이동합니다.

이제 npx를 사용하여 샘플 애플리케이션을 시작하겠습니다.

```undefined
npx create-react-app wallaby-create-react-app
```

CLI에 익숙하지 않은 경우 왈라비 생성-반응 앱이라는 디렉토리에 새 반응 프로젝트가 생성됩니다. 이 작업은 다소 시간이 걸릴 수 있으므로 npx가 작업을 수행하는 동안 VSCode 내의 확장 라이브러리로 이동하여 Wallaby.js를 설치할 수 있습니다.

설치 시 나타나는 프롬프트를 잠재우기 위해 확장된 평가판 코드를 요청할 수도 있지만, 오픈 소스 프로젝트에 무료로 사용할 수 있습니다.

가장 간단한 형태로, Wallaby는 광범위한 구성 없이도 React 앱에서 원활하게 실행될 수 있습니다. 이 기능은 매우 원활하여 일단 설치되면 프로젝트 디렉토리만 가리키고 제대로 작동하도록 하면 됩니다.

지금쯤이면 Retact 앱이 끝나야 하므로 마우스 오른쪽 단추로 클릭한 다음 "Wallaby.js: Configure and Start"를 선택할 수 있습니다.

이때 App.test.js 파일을 열면 다음과 같은 내용이 표시됩니다.

```coffeescript
import { render, screen } from '@testing-library/react';
import App from './App';
test('renders learn react link', () => {
  render();
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});
```

아직 아무것도 수정하지 않았기 때문에 기본 테스트는 통과해야 합니다. 자, 이제 몇 가지를 바꾸자. Wallaby 설명서(11/24/2020 기준)를 참조할 경우 사전 설정된 테스트 파일의 코드가 약간 다르므로 테스트에 영향을 미치는 변경 사항을 시연하기 위해 다른 예를 사용해야 합니다.

기본 텍스트 대신 헤더에 "내 앱에 오신 것을 환영합니다"라고 표시하도록 했다고 가정해 보겠습니다. TDD에서는 먼저 테스트 내용을 작성하여 지금 작성하려는 코드가 작동 중임을 알려주십시오. 그래서 지금 바로 그렇게 하겠습니다. 다음과 같이 보이도록 기본 테스트를 업데이트합니다.

```coffeescript
test('Renders welcome message', () => {
  render();
  const welcomeElement = screen.getByText(/welcome/i);
  expect(welcomeElement).toBeInTheDocument();
});
```

`screen.getByText()` 메서드 내에서 텍스트를 변경하면 즉시 피드백이 표시됩니다. 코드 왼쪽에 있는 빨간색 블록은 제스트가 문서에서 "환영"이라는 단어를 포함하는 텍스트를 찾을 수 없기 때문에 테스트가 실패했음을 나타냅니다. 테스트 실패에도 불구하고 코드가 현재 상태로 실행되지 않도록 하는 것은 아무것도 없기 때문에 원본 페이지가 여전히 렌더링된다는 것을 알 수 있습니다.

이제 우리는 테스트를 통과하도록 코드를 수정할 것입니다. 먼저 App.js 파일로 이동합니다. 월러비가 우리에게 주는 피드백을 주목하세요.

문서에서: 분홍색 사각형은 원본 선이 실패한 검정의 실행 경로에 있음을 의미합니다.
이제 "welcome"이라는 단어가 포함되도록 < 태그의 내용을 업데이트합니다.

```undefined
<p> 
Welcome to my app! Edit `src/App.js` and save to reload. 
</p>
```

이렇게 하면 구성 요소와 테스트 파일의 상자가 다시 녹색으로 표시됩니다.

## 왈라비와 함께 다음 단계.js

축하합니다! 방금 첫 번째 실시간 통합 테스트를 완료했습니다. 테스트를 처음 접하는 경우, 추가 훅 없이 어떤 일이 벌어지는지 보여줌으로써 전체 프로세스를 약간 혼란스럽게 할 수 있습니다.

만약 당신이 이미 프로라면, 그 의미는 분명할 것이다. 프로젝트의 시간을 절약하기 위해 할 수 있는 모든 일은 프로젝트가 복잡해질수록 점점 더 가치 있게 됩니다.

결국, 이 모든 것은 생산성으로 이어지는 효율로 귀결됩니다. 왈라비는 테스트를 새로운 코드로 제한하는 기능을 가지고 있기 때문에 단일 기능이 예상대로 작동한다는 것을 증명하기 위해 수십 개 또는 수백 개의 관련 없는 테스트가 실행되지 않도록 한다.

지금까지 Retact에서 Wallaby.js를 사용하는 기본 사항에 대해 다루었습니다. 설정 방법 및 Wallaby.js가 수행할 수 있는 작업에 대해 설명합니다. 다시 말씀드리지만 Wallaby.js에 포함된 전체 기능 집합은 이 가이드의 범위를 벗어납니다. 따라서 공식 문서로 이동하여 이 믿을 수 없는 도구가 귀하에게 어떤 도움이 될 수 있는지 확인하십시오.