---
layout: post
title: "서비스 직원에 대한 PWA 설정 및 애플리케이션 생성-반격"
author: 'Code Tower'
thumbnail: https://blog.logrocket.com/wp-content/uploads/2020/12/create-react.png
tags: undefined
---


![image](https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2020/12/create-react.png?fit=730%2C487&ssl=1)

이 튜토리얼에서는 CRA(Create-Ract-App)를 사용하여 PWA(Progressive Web App)를 구축하는 데 필요한 사항을 설명합니다. 먼저 PWA에 대해 설명하고, 서비스 직원이 무엇인지에 대해 논의한 후, 마지막으로 CRA를 위한 서비스 직원을 설정하는 단계를 검토합니다.

## 진행 중인 웹 응용 프로그램

프로그레시브 웹 앱(progressive web app)은 네이티브 또는 플랫폼별 앱과 동일한 기능을 가진 향상된 웹 앱이다.

예를 들어, 진행형 웹 앱은 사용자의 홈 스크린에 직접 설치되고 독립 실행형 창에서 실행될 수 있습니다. 이러한 앱은 열악한 네트워크 조건에서 빠르고 안정적으로 실행되며 오프라인에서도 작동할 수 있습니다.

앱을 사용하는 동안 일반적인 모바일 사용자가 변화하는 환경에서 어떻게 움직이는지 생각해 보십시오. 신뢰성이 높은 고속 네트워크를 갖춘 빌딩에서 시작할 수도 있습니다. 아주 좋습니다. 그리고 나서 그들은 거리로 나가서 와이파이를 잃어버리고 휴대폰 연결로 돌아간다.

강력한 4G 또는 5G 신호가 잡히거나 3G만 있는 저서비스 딥에 부딪힐 수 있습니다. 연결이 전혀 없는 경우에도 모든 네트워크 환경에서 어떻게 앱에 남아있을 수 있습니까?

진행형 웹 앱을 사용하면 사용자가 어디에 있든 액세스하여 모든 네트워크 환경에서 빠르고 안정적인 사용자 환경을 제공할 수 있습니다.

## 서비스직이란 무엇인가?

서비스 작업자는 웹 앱에서 네트워크 요청을 가로채고 이러한 요청이 처리되는 방법을 제어하는 특별한 유형의 웹 작업자입니다. 특히 서비스 직원은 캐시에서 리소스의 캐슁 및 검색을 관리할 수 있으므로 PWA에 중요한 오프라인 우선 모드를 지원할 수 있습니다.

서비스 직원은 진행형 웹 응용 프로그램을 실행하는 데 필수적인 지원을 제공합니다.

서비스 작업자는 기본 브라우저 스레드에서 차단되지 않는 별도의 스레드에서 실행되는 JavaScript 파일의 형식을 취합니다.

최신 버전의 CRA에는 앱의 프리캐칭 목록에 서비스 작업자를 컴파일 및 주입하는 작업을 처리하는 Workbox의 InjectManifest 플러그인에 대한 기본 지원 기능이 포함되어 있습니다.

## 애플리케이션 생성을 위한 서비스 직원 설정

### 전제조건

시작하기 전에 몇 가지 작업을 수행해야 합니다.

- 앱 4 이상 생성-응답(create-react-app)을 사용하고 있는지 확인합니다.
- 운영 웹 서버가 HTTPS를 지원하는지 확인하십시오.

> 팁: 서비스 작업자와 진행형 웹 앱 기능은 보안상의 이유로 HTTPS를 통해서만 실행됩니다. HTTP를 통해 앱을 실행할 수는 있지만 오프라인 우선 모드 및 서비스 직원이 사용할 수 있는 기타 모든 훌륭한 기능에 액세스할 수는 없습니다.

이제 설치 프로세스에 착수할 준비가 되었습니다.

### 1.) 프로젝트를 생성하고 'service-worker.js' 파일을 추가합니다.

Workbox의 InjectManifest 플러그인과 CRA 통합을 활용하려면 사용자 지정 PWA 템플릿을 사용하여 새 프로젝트를 생성하기만 하면 됩니다.

```cpp
npx create-react-app my-app --template cra-template-pwa
```

템플릿은 프로젝트에 `src/service-worker.js` 파일을 자동으로 추가합니다. 이 파일에는 나중에 돌아와서 원하는 대로 사용자 정의할 수 있는 기본 서비스 작업자가 들어 있습니다.

또는 JavaScript를 통해 TypeScript에서 애플리케이션을 쓰기를 원하는 경우, starter `src/service-worker.js` 파일이 포함된 프로젝트를 생성하는 방법은 다음과 같습니다.

```cpp
npx create-react-app my-app --template cra-template-pwa-typescript
```

### 2.) 서비스 종사자 등록

기본적으로 서비스 근로자는 등록하기 전까지 활성화되지 않고 사용할 수 있습니다. 자세한 내용은 서비스 근로자 수명 주기의 기본 사항을 읽어보십시오.

프로젝트의 `src/index.js` 파일로 이동하여 다음 줄을 찾으십시오.

```cpp
// If you want your app to work offline and load faster, you can change
// unregister() to register() below. Note this comes with some pitfalls.
// Learn more about service workers: https://cra.link/PWA
serviceWorker.unregister();
```

서비스 직원을 사용할 수 있도록 등록하려면 마지막 줄을 다음과 같이 수정하면 됩니다.

```cpp
serviceWorker.register();
```

이제 `src/service-worker.js` 파일이 등록되었으며 사용자에게 오프라인 우선 환경을 제공하는 데 중요한 역할을 수행할 준비가 되었습니다.

### 3.) 서비스 작업자 사용자 정의

`cra-template-pwa` 또는 `cra-template-pwa-typescript` 템플릿을 사용하여 추가한 starter `src/service-worker.js` 파일은 진행형 웹 앱을 지원하기 위한 기본 논리와 함께 제공됩니다. 앱의 오프라인 우선 기능을 확장하려면 `src/service-worker.js`를 쉽게 사용자 정의할 수 있습니다.

팁: 사전 캐싱을 지원하려면 `자체`를 할당해야 합니다.InjectManifest 플러그인이 인식할 수 있는 변수에 대한 __WB_MANIFest ` 값입니다. 사전 캐시에 대한 URL 매니페스트를 생성하려면 플러그인이 이 값을 확인해야 합니다.

`src/service-worker.js` 파일을 사용자 지정할 수 있는 몇 가지 예는 다음과 같습니다.

- Workbox의 추가 서비스 작업자 패키지 사용
- 푸시 알림 추가
- 백그라운드 데이터 동기화 미세 조정
- 공유 지리 위치 또는 자이로스코프 데이터에 대한 업데이트 중앙 집중화
- 다른 도메인에서 발생하는 트래픽을 처리하는 기능 추가

ServiceWorker API가 계속 발전함에 따라 PWA를 통해 훨씬 더 많은 기능과 사용 사례를 지원할 수 있기를 기대할 수 있습니다.

### 4.) 사용자가 진행 중인 웹 앱을 탐색할 수 있도록 지원

이제 서비스 직원을 지원하도록 프로젝트를 구성했으므로 이제 사용자가 오프라인 우선 모드를 최대한 활용할 수 있도록 준비 상태를 확인해야 합니다. 진행형 웹 앱은 표준 웹 앱과 조금 다르게 동작하므로 사용자가 경험을 최대한 활용할 수 있도록 교육하는 것이 좋습니다.

다음을 알리는 인앱 메시지를 표시하여 사용자를 도울 수 있습니다.

- Chrome, Firefox, Opera, Samsung Internet, Safari 또는 Edge와 같은 서비스 직원을 지원하는 브라우저를 사용합니다. (참고: 개인 또는 인식 모드에서 서비스 작업자는 어떤 브라우저에서도 지원되지 않습니다.)
- 앱이 오프라인으로 작동할 때 주의하십시오. 서비스 작업자가 처음에 캐시를 채웠으면 사용자에게 앱을 오프라인에서 사용할 수 있음을 알리는 메시지를 표시합니다.
- 최신 업데이트를 보려면 기존 브라우저 탭을 닫으십시오. 기본적으로 서비스 작업자는 콘텐츠 업데이트를 가져온 후 대기 상태로 유지됩니다. 따라서 열려 있는 모든 탭을 닫고 새 페이지를 로드해야 변경 내용을 볼 수 있습니다.

## 요약

Workbox와의 강력한 통합 덕분에 표준 웹 앱을 PWA로 전환하는 것은 전혀 효과가 없습니다. 오프라인 우선 사용자 환경을 지원하도록 서비스 직원을 설정하면, 앱은 언제 어디서나 더 많은 사용자에게 연락할 수 있습니다.