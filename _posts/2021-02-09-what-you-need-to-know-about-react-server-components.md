---
layout: post
title: "React 서버 구성 요소에 대해 알아야 할 사항"
author: "Front Log"
thumbnail: "https://blog.logrocket.com/wp-content/uploads/2021/02/reactservercomponents.png"
tags: 
---


![image](https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2021/02/reactservercomponents.png?fit=730%2C487&ssl=1)

최신 앱은 조사, 설계, 개발 및 테스트하는 데 많은 시간이 필요합니다. 현대 앱을 구축하는 데 활용할 수 있는 기술은 매우 다양하며, 각각의 기술은 특정한 문제를 해결하는 데 있으며, 각각의 장단점이 있다. 현대 앱을 만드는 데는 전혀 도움이 되지 않습니다.

React를 사용할 때, 우리는 오늘날 사용되는 몇 가지 다른 기법의 이름을 댈 수 있지만, 가장 많이 사용되는 것은 서버측 렌더링과 클라이언트측 렌더링이다. 이 두 기술 모두 특정한 문제를 해결하며 개발자들이 풍부한 최신 앱을 구축하는 데 가장 많이 사용한다.

2020년 말에 리액트 팀은 리액트 서버 컴포넌트라는 새로운 기능을 제안했다. 그 이후, React 커뮤니티는 React 애플리케이션을 구축하는 이 새로운 방법의 장단점과 이것이 React 애플리케이션의 미래에 어떤 영향을 미칠 수 있는지에 대해 논의하기 시작했습니다.

React Server Components에 대해 다루며, React 앱의 최신 구성 방식을 어떻게 변화시킬 것인지 살펴봅니다.

## 서버 구성 요소 대응

React Server Components에 대해 자세히 알아보기 전에 아직 개발 중이므로 아직 프로덕션에서 사용하지 않는 것이 좋습니다.

대응 팀:

> 서버 구성 요소를 통해 개발자는 클라이언트 측 앱의 풍부한 상호 작용성과 기존 서버 렌더링의 향상된 성능을 결합하여 서버와 클라이언트를 포괄하는 앱을 구축할 수 있습니다.

React 서버 구성 요소는 번들 크기에 전혀 영향을 미치지 않으며 React 앱을 구축하는 방법도 달라질 수 있습니다. 번들 크기 자체를 줄일 뿐만 아니라 초기 페이지 로드 시간도 단축됩니다.

응답 서버 구성요소는 서버에서 렌더링되고 렌더링된 내용만 클라이언트로 전송됩니다.

```js
import db from "database";

const Comment = (props) => {
  const { id } = props;
  const comment = db.comments.get(id);
  return (
    <div>
      <h1>{comment.title}</h1>
      <p>{comment.text}</p>
    </div>
  );
};
```

React 서버 구성 요소는 기존의 React 구성 요소와 비슷하게 생겼으며, 소품을 포함하고 렌더링 방법을 사용합니다. 다음과 같은 몇 가지 추가 기능만 있습니다.

- 마이크로 서비스, 기능, 데이터베이스 등과 같은 서버 데이터 소스에 직접 액세스할 수 있습니다. 이 기능이 열릴 가능성은 매우 큽니다. 우리는 다양한 데이터 소스로 작동하는 내부 API를 만들 수 있을 것이며, API에 직접 노출하지 않고도 구성 요소 내부에서 서버에 액세스할 수 있습니다.
- 구성 요소 이름 뒤에 있는 `.server.js` 접미사를 사용하여 작업 명명 규칙에 따라 생성됩니다. 예를 들어 구성 요소의 이름을 `note.js`로 지정하려면 `note.server.js`여야 합니다. 각각, 클라이언트 구성요소는 구성요소 이름 뒤에 `.client.js` 접미사를 사용하여 명명 규칙에 따라 작성됩니다.

React Server Components는 현재 문제가 모두 해결되지는 않습니다. React 서버 구성 요소에 없는 몇 가지 기능은 다음과 같습니다.

- React 서버 구성 요소는 요청당 한 번 실행되므로 상태를 가질 수 없으므로 `useState` 및 `useReduce`와 같은 상태 데이터를 처리하는 데 React 후크를 사용하는 아이디어는 지원되지 않습니다.
- React 서버 구성 요소에서 `use Effect` 및 `use Layout Effect`와 같은 렌더링 수명 주기 방법에 대해 React 후크를 사용할 수 없음
- 대응 서버 구성 요소가 브라우저 전용 API를 사용할 수 없음

서버 및 클라이언트 구성 요소에서 모두 사용할 수 있는 React 구성 요소와 후크를 생성할 수 있습니다. 후크는 구성 요소 간에 논리를 공유하는 매우 간단하고 강력한 방법이며 서버 구성 요소와 함께 사용할 수 있습니다.

다음을 포함한 모든 제약 조건을 준수하는지 확인해야 합니다.

- useState 또는 useReducer와 같은 후크를 사용하여 상태 로직을 사용할 수 없습니다.
- 서버측 데이터 소스를 사용할 수 없습니다.
- 상태, 효과 또는 브라우저 전용 API에 의존하는 사용자 지정 후크는 사용할 수 없습니다.

모든 제약 조건을 따랐을 때, 우리는 서버측과 클라이언트측에서 모두 사용할 수 있는 구성 요소와 후크를 만들 수 있습니다.

기존 React 구성 요소는 클라이언트 측에서 렌더링되므로 클라이언트 구성 요소라고 합니다. 클라이언트 구성 요소는 사용자가 자주 사용하는 구성 요소이며, 상태 데이터를 처리할 수 있으며, 브라우저 전용 API 등과 함께 작동할 수 있습니다.

대응 서버 구성 요소는 서버 구성 요소, 기본 HTML 요소 또는 클라이언트 구성 요소를 렌더링할 수 있습니다. 클라이언트 구성 요소인 `CommentLikeButton`이라는 구성 요소를 사용하면 서버 구성 요소 내부로 가져와 문제 없이 사용할 수 있습니다.

```js
import db from "database";
import CommentLikeButton from 'CommentLikeButton.client';

const Comment = (props) => {
  const { id } = props;
  const comment = db.comments.get(id);
  return (
    <div>
      <h1>{comment.title}</h1>
      <section>{comment.body}</section>
      <CommentLikeButton />
    </div>
  );
};
```

## RSC 대 SSR

서버측 렌더링(Server-side rendering)은 서버측에서 앱을 렌더링하여 HTML을 클라이언트로 전송하고, HTML은 브라우저에 의해 렌더링되는 기술이다. 다음은 서버측 렌더링 앱이 제공하는 두 가지 가장 중요한 장점 중 하나입니다.

- 성능 — 클라이언트가 수신한 HTML 파일이 이미 콘텐츠로 채워져 있으며 렌더링할 준비가 되었으므로 브라우저에서 JavaScript를 가져올 필요가 없습니다.
- SEO — 일반적으로 검색 엔진이 앱을 렌더링하는 데 더 많은 시간을 투자해야 하므로 SEO 성능이 향상됩니다. 클라이언트에서 필요로 하는 모든 내용이 서버에 렌더링되므로, 파일이 렌더링될 준비가 되어 더 나은 순위 검색 결과를 얻을 수 있습니다.

서버 구성요소는 서버 측에서 렌더링되지만 HTML로 렌더링되지 않는 구성요소입니다. 서버 구성요소는 클라이언트로 스트리밍되는 특수 형식을 사용하여 렌더링됩니다.
대응 서버 구성요소는 다음과 같이 렌더링됩니다.

![image](https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2021/02/react-server-component-render.png?resize=730%2C122&ssl=1)

React Server Components가 구성 요소를 렌더링하는 데 사용하는 스트림은 현재 표준 프로토콜이 없지만 JSON 형식과 많이 유사합니다.

React Server Components는 매우 강력하지만 서버측 렌더링된 애플리케이션을 대체하지는 못합니다. 몇 가지 차이점이 있습니다.

- 대응 서버 구성 요소는 언제든지 렌더링할 수 있지만 SSR 앱은 렌더링할 수 있지만 완전히 새로운 HTML 페이지를 렌더링하고 앱 상태를 잃게 됩니다(있는 경우).
- React 서버 구성 요소는 트리 어디서나 마이크로서비스, 기능, 데이터베이스와 같은 서버 데이터 원본에 액세스할 수 있으며, SSR 애플리케이션, 특히 Next에서는 페이지의 최상위 단계에서만 작동하는 getServerProp()를 사용해야 합니다.

대부분의 경우 서버측 렌더링을 사용할 때 초기 렌더링에 한 번만 사용합니다. 서버 구성 요소를 여러 번 리셋하여 데이터를 다시 렌더링할 수 있습니다. 서버 구성요소를 정기적으로 다시 가져올 수 있으며, 서버는 클라이언트 구성요소의 상태 데이터를 손실하지 않고 업데이트를 스트리밍합니다.

## 대응 서버 구성요소의 영향

웹 개발 커뮤니티에 새로 출시되는 모든 것들은 현재 우리가 만들고 있는 방식을 바꿀 수 있고 미래에 현대적인 애플리케이션을 구축할 것입니다. 개발자들은 항상 자신의 애플리케이션을 개선하기 위한 새로운 기술을 찾고 있으며, 물론 React Server Components는 최신 애플리케이션을 구축하는 새로운 방법을 도입할 수도 있습니다.

React Server Components는 서버측 렌더링 앱과 다르다는 것을 알고 있으며, 렌더링에 특수 형식을 사용하며 데이터를 렌더링하려는 횟수만큼 구성요소를 다시 가져올 수도 있습니다. 이 두 가지 기능만으로 Retact 애플리케이션을 구축하는 전체 방식을 쉽게 변경할 수 있습니다.

React Server Components를 사용하면 클라이언트와 서버측 렌더링 구성 요소를 모두 혼합하여 최신 애플리케이션을 구축할 수 있으며, React Server Components를 사용하는 UI 서버측에서는 일부만 렌더링하고 기존의 React 구성 요소를 사용하는 다른 UI 부품을 사용할 수 있습니다.

새로운 기술이지만 React Server Components는 제로 번들 크기, 서버에서 직접 데이터 소스에 액세스, 클라이언트 구성 요소와의 통합 등과 같은 미래의 최신 애플리케이션 구축 방식을 확실히 개선할 수 있는 많은 잠재력과 뛰어난 기능을 갖추고 있습니다.

## 결론

React는 최신 애플리케이션을 구축하는 데 많은 다양한 기술을 가지고 있으며 React Server Components는 서버 측에서 구성 요소를 렌더링하고 클라이언트에만 콘텐츠를 전송하는 매우 강력한 기술입니다. 앞에서 살펴본 것처럼 서버 구성요소는 여전히 서버측 렌더링된 응용프로그램과 약간 다르며 몇 가지 다른 기능을 가지고 있습니다. 서버 구성요소는 React 팀이 아직 연구 개발 중이지만 Retact 앱의 미래는 매우 밝아서 개발자가 서버측 렌더링 구성요소와 클라이언트측 렌더링 구성요소를 함께 만들 수 있어 클라이언트 경험과 앱 성능을 향상시킬 수 있을 것으로 예상됩니다.